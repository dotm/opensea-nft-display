// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import type { NextApiRequest, NextApiResponse } from 'next';

export type CollectionItemData = {
  name: string,
  imageUrl: string,
  contractAddress: string,
  tokenId: string,
  ethPrice: string,
}

export type GetCollectionData = {
  error: any,
  collectionItems: CollectionItemData[],
  nextPageCursor: string | undefined,
}

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse<GetCollectionData>
) {
  const collectionUrlSuffix = req.query.collectionUrlSuffix
  if(collectionUrlSuffix === undefined){
    res.status(200).json({
      error: "Mohon mengisi url path koleksi",
      collectionItems: [],
      nextPageCursor: undefined,
    })
    return
  }
  if(collectionUrlSuffix === ""){
    res.status(200).json({
      error: "Mohon mengisi url path koleksi",
      collectionItems: [],
      nextPageCursor: undefined,
    })
    return
  }
  
  let cursor: string | undefined = undefined
  if(req.query.cursor === undefined || req.query.cursor === ""){
    cursor = undefined
  }else{
    cursor = req.query.cursor as string
  }
  const resp = await fetchOpenSeaCollectionGraphQL(collectionUrlSuffix as string, cursor)
  const {collectionItems, nextPageCursor} = await parseResponseFromOpenSeaCollectionGraphQL(resp)
  
  res.status(200).json({
    error: null,
    collectionItems,
    nextPageCursor,
  })
}

async function parseResponseFromOpenSeaCollectionGraphQL(
  response: Response
): Promise<{collectionItems:  CollectionItemData[], nextPageCursor: string | undefined}>{
  const jsonResp = await response.json()
  const collectionItems = jsonResp.data.collectionItems.edges.map(function(e: any){
    const ethPriceNum = e.node.orderData.bestAskV2?.priceType.eth
    let ethPriceStr = "No price found"
    if(ethPriceNum !== undefined){
      ethPriceStr = ethPriceNum + " ETH"
    }

    return {
      name: e.node.name,
      imageUrl: e.node.imageUrl,
      contractAddress: e.node.assetContract.address,
      tokenId: e.node.tokenId,
      ethPrice: ethPriceStr
    }
  })
  return {
    collectionItems,
    nextPageCursor: jsonResp.data.collectionItems.pageInfo.hasNextPage
      ? jsonResp.data.collectionItems.pageInfo.endCursor
      : undefined
  }
}

//hacky graphql for fast implementation
function fetchOpenSeaCollectionGraphQL(collectionUrlSuffix: string, cursor: string | undefined): Promise<Response>{
  if(cursor === undefined){
    return fetchOpenSeaCollectionGraphQLWithoutCursor(collectionUrlSuffix)
  }else{
    return fetchOpenSeaCollectionGraphQLWithCursor(collectionUrlSuffix, cursor)
  }
}
function fetchOpenSeaCollectionGraphQLWithCursor(collectionUrlSuffix: string, cursor: string | undefined): Promise<Response> {
  return fetch("https://opensea.io/__api/graphql/", {
    "headers": {
      "accept": "*/*",
      "accept-language": "en-US,en;q=0.9,ko-KR;q=0.8,ko;q=0.7,id;q=0.6",
      "content-type": "application/json",
      "sec-ch-ua": "\"Chromium\";v=\"116\", \"Not)A;Brand\";v=\"24\", \"Google Chrome\";v=\"116\"",
      "sec-ch-ua-mobile": "?0",
      "sec-ch-ua-platform": "\"Windows\"",
      "sec-fetch-dest": "empty",
      "sec-fetch-mode": "cors",
      "sec-fetch-site": "same-origin",
      "x-app-id": "opensea-web",
      "x-build-id": "474e34cbb34d812f80df977c4ceadd5ebc38611c",
      "x-signed-query": "b6cba485cb0efe558827ca81e73081b4d363da93710de999c1cbbaced3374d13",
      "cookie": "os-amplitude={%22deviceId%22:%22f7dfb5a3-1567-407b-8242-7b5750262b47%22}; _gcl_au=1.1.1944698478.1695882837; ext-os-wallet={%22installedWallets%22:[]%2C%22theme%22:%22light%22}; __os_session=eyJpZCI6IjM1ODU3YzVlLTMwNDctNGVhZC05ZGYwLWUyOGExMTdlMThmMiJ9; __os_session.sig=ITVoVLkx15nlT0Q60S1uh1dNksHY-wczESjp2dYrkUU; _gid=GA1.2.1047924192.1695882854; new_account_table_view_asset_card_variant=undefined; _cfuvid=dLM4YflCd.XECriwlsZ0EWPCNp44uzbEyPgXRxekSaY-1695892138543-0-604800000; __cf_bm=5l32Wx6_PsI6waKEg.oUGWCQpqcxWgdo.RWzg2HlBak-1695898560-0-Aacll0Ok24Yp5E0cVrocZfP3Pr3tN2wLhjyu5tbEsGKWMFO8DswPsYcbgncjav9RPMrByjXnX+n0aCOiP2JsYDI=; AMP_MKTG_ddd6ece4d5=JTdCJTdE; cf_clearance=sqrtR8CVdIg33he65Lp9eSAwQcjZ6OKf.qUTOMDEOLk-1695899163-0-1-c4cd0a1c.83db0d75.93cc55fc-0.2.1695899163; AMP_ddd6ece4d5=JTdCJTIyZGV2aWNlSWQlMjIlM0ElMjJmN2RmYjVhMy0xNTY3LTQwN2ItODI0Mi03YjU3NTAyNjJiNDclMjIlMkMlMjJzZXNzaW9uSWQlMjIlM0ExNjk1ODk5MTI3OTQ4JTJDJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJsYXN0RXZlbnRUaW1lJTIyJTNBMTY5NTg5OTEzMDgxMCUyQyUyMmxhc3RFdmVudElkJTIyJTNBOTclN0Q=; _gat_UA-111688253-1=1; _gat_gtag_UA_111688253_1=1; _ga_9VSBF2K4BX=GS1.1.1695899133.5.0.1695899133.0.0.0; _ga=GA1.1.341421751.1695882854; _uetsid=0aa382d05dc911eea831297ad411c90e; _uetvid=0aa3bfe05dc911ee84b789a1891240c4; _dd_s=rum=0&expire=1695900036550",
      "Referer": "https://opensea.io/",
      "Referrer-Policy": "strict-origin"
    },
    "body": `{\"id\":\"CollectionAssetSearchListPaginationQuery\",\"query\":\"query CollectionAssetSearchListPaginationQuery(\\n  $collections: [CollectionSlug!]\\n  $count: Int!\\n  $cursor: String\\n  $filterOutListingsWithoutRequestedCreatorFees: Boolean\\n  $numericTraits: [TraitRangeType!]\\n  $owner: IdentityInputType\\n  $paymentAssets: [PaymentAssetSymbol]\\n  $priceFilter: PriceFilterType\\n  $query: String\\n  $rarityFilter: RarityFilterType\\n  $resultModel: SearchResultModel\\n  $safelistRequestStatuses: [SafelistRequestStatus!]\\n  $shouldShowBestBid: Boolean!\\n  $sortAscending: Boolean\\n  $sortBy: SearchSortBy\\n  $stringTraits: [TraitInputType!]\\n  $toggles: [SearchToggle!]\\n) {\\n  ...CollectionAssetSearchListPagination_data_5g0y8\\n}\\n\\nfragment AccountLink_data on AccountType {\\n  address\\n  config\\n  isCompromised\\n  user {\\n    publicUsername\\n    id\\n  }\\n  displayName\\n  ...ProfileImage_data\\n  ...wallet_accountKey\\n  ...accounts_url\\n}\\n\\nfragment AddToCartAndQuickBuyButton_order on OrderV2Type {\\n  ...useIsQuickBuyEnabled_order\\n  ...ItemAddToCartButton_order\\n  ...QuickBuyButton_order\\n}\\n\\nfragment AssetContextMenu_data on AssetType {\\n  relayId\\n}\\n\\nfragment AssetMediaAnimation_asset on AssetType {\\n  ...AssetMediaImage_asset\\n  ...AssetMediaContainer_asset\\n  ...AssetMediaPlaceholderImage_asset\\n}\\n\\nfragment AssetMediaAudio_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaImage_asset\\n}\\n\\nfragment AssetMediaContainer_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaEditions_asset_1mZMwQ\\n  collection {\\n    ...useIsRarityEnabled_collection\\n    id\\n  }\\n}\\n\\nfragment AssetMediaContainer_asset_1LNk0S on AssetType {\\n  backgroundColor\\n  ...AssetMediaEditions_asset_1mZMwQ\\n  collection {\\n    ...useIsRarityEnabled_collection\\n    id\\n  }\\n}\\n\\nfragment AssetMediaContainer_asset_4a3mm5 on AssetType {\\n  backgroundColor\\n  ...AssetMediaEditions_asset_1mZMwQ\\n  defaultRarityData {\\n    ...RarityIndicator_data\\n    id\\n  }\\n  collection {\\n    ...useIsRarityEnabled_collection\\n    id\\n  }\\n}\\n\\nfragment AssetMediaEditions_asset_1mZMwQ on AssetType {\\n  decimals\\n}\\n\\nfragment AssetMediaImage_asset on AssetType {\\n  backgroundColor\\n  imageUrl\\n  collection {\\n    displayData {\\n      cardDisplayStyle\\n    }\\n    id\\n  }\\n}\\n\\nfragment AssetMediaPlaceholderImage_asset on AssetType {\\n  collection {\\n    displayData {\\n      cardDisplayStyle\\n    }\\n    id\\n  }\\n}\\n\\nfragment AssetMediaVideo_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaImage_asset\\n}\\n\\nfragment AssetMediaWebgl_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaImage_asset\\n}\\n\\nfragment AssetMedia_asset on AssetType {\\n  animationUrl\\n  displayImageUrl\\n  imageUrl\\n  isDelisted\\n  ...AssetMediaAnimation_asset\\n  ...AssetMediaAudio_asset\\n  ...AssetMediaContainer_asset_1LNk0S\\n  ...AssetMediaImage_asset\\n  ...AssetMediaPlaceholderImage_asset\\n  ...AssetMediaVideo_asset\\n  ...AssetMediaWebgl_asset\\n}\\n\\nfragment AssetMedia_asset_1mZMwQ on AssetType {\\n  animationUrl\\n  displayImageUrl\\n  imageUrl\\n  isDelisted\\n  ...AssetMediaAnimation_asset\\n  ...AssetMediaAudio_asset\\n  ...AssetMediaContainer_asset_1LNk0S\\n  ...AssetMediaImage_asset\\n  ...AssetMediaPlaceholderImage_asset\\n  ...AssetMediaVideo_asset\\n  ...AssetMediaWebgl_asset\\n}\\n\\nfragment AssetMedia_asset_5MxNd on AssetType {\\n  animationUrl\\n  displayImageUrl\\n  imageUrl\\n  isDelisted\\n  ...AssetMediaAnimation_asset\\n  ...AssetMediaAudio_asset\\n  ...AssetMediaContainer_asset_4a3mm5\\n  ...AssetMediaImage_asset\\n  ...AssetMediaPlaceholderImage_asset\\n  ...AssetMediaVideo_asset\\n  ...AssetMediaWebgl_asset\\n}\\n\\nfragment AssetQuantity_data on AssetQuantityType {\\n  asset {\\n    ...Price_data\\n    id\\n  }\\n  quantity\\n}\\n\\nfragment AssetSearchListViewTableAssetInfo_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ...PortfolioTableItemCellTooltip_item\\n}\\n\\nfragment AssetSearchListViewTableQuickBuy_order on OrderV2Type {\\n  maker {\\n    address\\n    id\\n  }\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    ...itemEvents_dataV2\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  openedAt\\n  relayId\\n}\\n\\nfragment AssetSearchList_data_4hkUTB on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  ...ItemCard_data_1kHswz\\n  ... on AssetType {\\n    collection {\\n      isVerified\\n      relayId\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      isVerified\\n      relayId\\n      id\\n    }\\n  }\\n  chain {\\n    identifier\\n  }\\n  ...useAssetSelectionStorage_item_3j1bgC\\n}\\n\\nfragment BulkPurchaseModal_orders on OrderV2Type {\\n  relayId\\n  item {\\n    __typename\\n    relayId\\n    chain {\\n      identifier\\n    }\\n    ... on AssetType {\\n      collection {\\n        slug\\n        isSafelisted\\n        id\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  payment {\\n    relayId\\n    symbol\\n    id\\n  }\\n  ...useTotalPrice_orders\\n  ...useFulfillingListingsWillReactivateOrders_orders\\n}\\n\\nfragment CancelItemOrdersButton_items on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  chain {\\n    identifier\\n  }\\n  ... on AssetType {\\n    relayId\\n  }\\n  ... on AssetBundleType {\\n    relayId\\n  }\\n  ...CancelOrdersConfirmationModal_items\\n}\\n\\nfragment CancelOrdersConfirmationModal_items on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...StackedAssetMedia_assets\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            ...StackedAssetMedia_assets\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment CollectionAssetSearchListPagination_data_5g0y8 on Query {\\n  queriedAt\\n  collectionItems(first: $count, after: $cursor, collections: $collections, numericTraits: $numericTraits, paymentAssets: $paymentAssets, priceFilter: $priceFilter, querystring: $query, rarityFilter: $rarityFilter, resultType: $resultModel, safelistRequestStatuses: $safelistRequestStatuses, sortAscending: $sortAscending, sortBy: $sortBy, stringTraits: $stringTraits, toggles: $toggles, owner: $owner, prioritizeBuyNow: true, filterOutListingsWithoutRequestedCreatorFees: $filterOutListingsWithoutRequestedCreatorFees) {\\n    edges {\\n      node {\\n        __typename\\n        ...readItemHasBestAsk_item\\n        ...AssetSearchList_data_4hkUTB\\n        ...useGetEligibleItemsForSweep_items\\n        ... on Node {\\n          __isNode: __typename\\n          id\\n        }\\n      }\\n      cursor\\n    }\\n    totalCount\\n    pageInfo {\\n      endCursor\\n      hasNextPage\\n    }\\n  }\\n}\\n\\nfragment CollectionLink_assetContract on AssetContractType {\\n  address\\n  blockExplorerLink\\n}\\n\\nfragment CollectionLink_collection on CollectionType {\\n  name\\n  slug\\n  verificationStatus\\n  ...collection_url\\n}\\n\\nfragment CollectionTrackingContext_collection on CollectionType {\\n  relayId\\n  slug\\n  isVerified\\n  isCollectionOffersEnabled\\n  defaultChain {\\n    identifier\\n  }\\n}\\n\\nfragment CreateListingButton_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...CreateQuickSingleListingFlowModal_asset\\n  }\\n  ...itemEvents_dataV2\\n  ...item_sellUrl\\n}\\n\\nfragment CreateQuickSingleListingFlowModal_asset on AssetType {\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  ...itemEvents_dataV2\\n}\\n\\nfragment EditListingButton_item on ItemType {\\n  __isItemType: __typename\\n  chain {\\n    identifier\\n  }\\n  ...EditListingModal_item\\n  ...itemEvents_dataV2\\n}\\n\\nfragment EditListingButton_listing on OrderV2Type {\\n  ...EditListingModal_listing\\n}\\n\\nfragment EditListingModal_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    tokenId\\n    assetContract {\\n      address\\n      id\\n    }\\n    chain {\\n      identifier\\n    }\\n  }\\n}\\n\\nfragment EditListingModal_listing on OrderV2Type {\\n  relayId\\n}\\n\\nfragment ItemAddToCartButton_order on OrderV2Type {\\n  maker {\\n    address\\n    id\\n  }\\n  taker {\\n    address\\n    id\\n  }\\n  item {\\n    __typename\\n    ... on AssetType {\\n      isCurrentlyFungible\\n    }\\n    ...itemEvents_dataV2\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  openedAt\\n  ...ShoppingCartContextProvider_inline_order\\n}\\n\\nfragment ItemCardContent on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  ... on AssetType {\\n    relayId\\n    name\\n    ...AssetMedia_asset_1mZMwQ\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            relayId\\n            ...AssetMedia_asset\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment ItemCardContent_1mZMwQ on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  ... on AssetType {\\n    relayId\\n    name\\n    ...AssetMedia_asset_1mZMwQ\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            relayId\\n            ...AssetMedia_asset\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment ItemCardCta_item_2qvZ6X on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  orderData {\\n    bestAskV2 {\\n      ...AddToCartAndQuickBuyButton_order\\n      ...EditListingButton_listing\\n      ...QuickBuyButton_order\\n      id\\n    }\\n  }\\n  ...useItemCardCta_item_2qvZ6X\\n  ...itemEvents_dataV2\\n  ...CreateListingButton_item\\n  ...EditListingButton_item\\n}\\n\\nfragment ItemCardFooter_EmmWh on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  name\\n  orderData {\\n    bestBidV2 {\\n      orderType\\n      priceType {\\n        unit\\n      }\\n      ...ItemCardPrice_data\\n      id\\n    }\\n    bestAskV2 {\\n      ...ItemCardFooter_bestAskV2\\n      id\\n    }\\n  }\\n  ...ItemMetadata_4xFTFU\\n  ... on AssetType {\\n    tokenId\\n    isDelisted\\n    defaultRarityData {\\n      ...RarityIndicator_data\\n      id\\n    }\\n    collection {\\n      slug\\n      name\\n      isVerified\\n      ...collection_url\\n      ...useIsRarityEnabled_collection\\n      id\\n    }\\n    largestOwner {\\n      owner {\\n        ...AccountLink_data\\n        id\\n      }\\n      id\\n    }\\n    ...AssetSearchListViewTableAssetInfo_item\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      slug\\n      name\\n      isVerified\\n      ...collection_url\\n      ...useIsRarityEnabled_collection\\n      id\\n    }\\n  }\\n  ...useItemCardCta_item_2qvZ6X\\n  ...item_url\\n  ...ItemCardContent\\n}\\n\\nfragment ItemCardFooter_bestAskV2 on OrderV2Type {\\n  orderType\\n  priceType {\\n    unit\\n  }\\n  maker {\\n    address\\n    id\\n  }\\n  ...ItemCardPrice_data\\n  ...ItemAddToCartButton_order\\n  ...AssetSearchListViewTableQuickBuy_order\\n  ...useIsQuickBuyEnabled_order\\n}\\n\\nfragment ItemCardPrice_data on OrderV2Type {\\n  perUnitPriceType {\\n    unit\\n  }\\n  payment {\\n    symbol\\n    id\\n  }\\n  ...useIsQuickBuyEnabled_order\\n}\\n\\nfragment ItemCard_data_1kHswz on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  orderData {\\n    bestAskV2 {\\n      priceType {\\n        eth\\n      }\\n      id\\n    }\\n  }\\n  ... on AssetType {\\n    isDelisted\\n    totalQuantity\\n    collection {\\n      slug\\n      ...CollectionTrackingContext_collection\\n      id\\n    }\\n    ...itemEvents_data\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      slug\\n      ...CollectionTrackingContext_collection\\n      id\\n    }\\n  }\\n  ...ItemCardContent_1mZMwQ\\n  ...ItemCardFooter_EmmWh\\n  ...ItemCardCta_item_2qvZ6X\\n  ...item_url\\n  ...ItemTrackingContext_item\\n}\\n\\nfragment ItemMetadata_4xFTFU on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  orderData {\\n    bestAskV2 {\\n      openedAt\\n      createdDate\\n      closedAt\\n      id\\n    }\\n  }\\n  assetEventData {\\n    lastSale {\\n      unitPriceQuantity {\\n        ...AssetQuantity_data\\n        quantity\\n        asset {\\n          symbol\\n          decimals\\n          id\\n        }\\n        id\\n      }\\n    }\\n  }\\n  ... on AssetType {\\n    bestAllTypeBid @include(if: $shouldShowBestBid) {\\n      perUnitPriceType {\\n        unit\\n        symbol\\n      }\\n      id\\n    }\\n    mintEvent @include(if: $shouldShowBestBid) {\\n      perUnitPrice {\\n        unit\\n        symbol\\n      }\\n      id\\n    }\\n  }\\n}\\n\\nfragment ItemTrackingContext_item on ItemType {\\n  __isItemType: __typename\\n  relayId\\n  verificationStatus\\n  chain {\\n    identifier\\n  }\\n  ... on AssetType {\\n    tokenId\\n    isReportedSuspicious\\n    assetContract {\\n      address\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    slug\\n  }\\n}\\n\\nfragment OrderListItem_order on OrderV2Type {\\n  relayId\\n  makerOwnedQuantity\\n  item {\\n    __typename\\n    displayName\\n    ... on AssetType {\\n      assetContract {\\n        ...CollectionLink_assetContract\\n        id\\n      }\\n      collection {\\n        ...CollectionLink_collection\\n        id\\n      }\\n      ...AssetMedia_asset\\n      ...asset_url\\n      ...useItemFees_item\\n    }\\n    ... on AssetBundleType {\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              displayName\\n              relayId\\n              assetContract {\\n                ...CollectionLink_assetContract\\n                id\\n              }\\n              collection {\\n                ...CollectionLink_collection\\n                id\\n              }\\n              ...StackedAssetMedia_assets\\n              ...AssetMedia_asset\\n              ...asset_url\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ...itemEvents_dataV2\\n    ...useIsItemSafelisted_item\\n    ...ItemTrackingContext_item\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  remainingQuantityType\\n  ...OrderPrice\\n}\\n\\nfragment OrderList_orders on OrderV2Type {\\n  item {\\n    __typename\\n    ... on AssetType {\\n      __typename\\n      relayId\\n    }\\n    ... on AssetBundleType {\\n      __typename\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              relayId\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  relayId\\n  ...OrderListItem_order\\n  ...useFulfillingListingsWillReactivateOrders_orders\\n}\\n\\nfragment OrderPrice on OrderV2Type {\\n  priceType {\\n    unit\\n  }\\n  perUnitPriceType {\\n    unit\\n  }\\n  payment {\\n    ...TokenPricePayment\\n    id\\n  }\\n}\\n\\nfragment PortfolioTableItemCellTooltip_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ...AssetMedia_asset_5MxNd\\n  ...PortfolioTableTraitTable_asset\\n  ...asset_url\\n}\\n\\nfragment PortfolioTableTraitTable_asset on AssetType {\\n  assetContract {\\n    address\\n    chain\\n    id\\n  }\\n  isCurrentlyFungible\\n  tokenId\\n}\\n\\nfragment Price_data on AssetType {\\n  decimals\\n  symbol\\n  usdSpotPrice\\n}\\n\\nfragment ProfileImage_data on AccountType {\\n  imageUrl\\n}\\n\\nfragment QuickBuyButton_order on OrderV2Type {\\n  maker {\\n    address\\n    id\\n  }\\n  taker {\\n    address\\n    ...wallet_accountKey\\n    id\\n  }\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    ...itemEvents_dataV2\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  openedAt\\n  relayId\\n}\\n\\nfragment RarityIndicator_data on RarityDataType {\\n  rank\\n  rankPercentile\\n  rankCount\\n  maxRank\\n}\\n\\nfragment ShoppingCartContextProvider_inline_order on OrderV2Type {\\n  relayId\\n  makerOwnedQuantity\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    relayId\\n    ... on AssetBundleType {\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              relayId\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  maker {\\n    relayId\\n    id\\n  }\\n  taker {\\n    address\\n    ...wallet_accountKey\\n    id\\n  }\\n  priceType {\\n    usd\\n  }\\n  payment {\\n    relayId\\n    id\\n  }\\n  remainingQuantityType\\n  ...useTotalItems_orders\\n  ...ShoppingCart_orders\\n}\\n\\nfragment ShoppingCartDetailedView_orders on OrderV2Type {\\n  relayId\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  supportsGiftingOnPurchase\\n  ...useTotalPrice_orders\\n  ...OrderList_orders\\n}\\n\\nfragment ShoppingCart_orders on OrderV2Type {\\n  ...ShoppingCartDetailedView_orders\\n  ...BulkPurchaseModal_orders\\n}\\n\\nfragment StackedAssetMedia_assets on AssetType {\\n  relayId\\n  ...AssetMedia_asset\\n  collection {\\n    logo\\n    id\\n  }\\n}\\n\\nfragment SweepContextProvider_items on ItemType {\\n  __isItemType: __typename\\n  relayId\\n  orderData {\\n    bestAskV2 {\\n      relayId\\n      payment {\\n        symbol\\n        id\\n      }\\n      perUnitPriceType {\\n        unit\\n      }\\n      ...BulkPurchaseModal_orders\\n      ...useTotalPrice_orders\\n      id\\n    }\\n  }\\n}\\n\\nfragment TokenPricePayment on PaymentAssetType {\\n  symbol\\n}\\n\\nfragment accounts_url on AccountType {\\n  address\\n  user {\\n    publicUsername\\n    id\\n  }\\n}\\n\\nfragment asset_url on AssetType {\\n  assetContract {\\n    address\\n    id\\n  }\\n  tokenId\\n  chain {\\n    identifier\\n  }\\n}\\n\\nfragment bundle_url on AssetBundleType {\\n  slug\\n  chain {\\n    identifier\\n  }\\n}\\n\\nfragment collection_url on CollectionType {\\n  slug\\n  isCategory\\n}\\n\\nfragment itemEvents_data on AssetType {\\n  relayId\\n  assetContract {\\n    address\\n    id\\n  }\\n  tokenId\\n  chain {\\n    identifier\\n  }\\n}\\n\\nfragment itemEvents_dataV2 on ItemType {\\n  __isItemType: __typename\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  ... on AssetType {\\n    tokenId\\n    assetContract {\\n      address\\n      id\\n    }\\n  }\\n}\\n\\nfragment item_sellUrl on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...asset_url\\n  }\\n  ... on AssetBundleType {\\n    slug\\n    chain {\\n      identifier\\n    }\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            relayId\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment item_url on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...asset_url\\n  }\\n  ... on AssetBundleType {\\n    ...bundle_url\\n  }\\n}\\n\\nfragment readItemHasBestAsk_item on ItemType {\\n  __isItemType: __typename\\n  orderData {\\n    bestAskV2 {\\n      __typename\\n      id\\n    }\\n  }\\n}\\n\\nfragment useAssetSelectionStorage_item_3j1bgC on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  chain {\\n    identifier\\n    isTradingEnabled\\n  }\\n  ... on AssetType {\\n    bestAllTypeBid @include(if: $shouldShowBestBid) {\\n      relayId\\n      id\\n    }\\n    ...asset_url\\n    isCompromised\\n  }\\n  ... on AssetBundleType {\\n    orderData {\\n      bestBidV2 @include(if: $shouldShowBestBid) {\\n        relayId\\n        id\\n      }\\n    }\\n  }\\n  ...item_sellUrl\\n  ...AssetContextMenu_data\\n  ...CancelItemOrdersButton_items\\n}\\n\\nfragment useFulfillingListingsWillReactivateOrders_orders on OrderV2Type {\\n  ...useTotalItems_orders\\n}\\n\\nfragment useGetEligibleItemsForSweep_items on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  orderData {\\n    bestAskV2 {\\n      relayId\\n      orderType\\n      maker {\\n        address\\n        id\\n      }\\n      perUnitPriceType {\\n        usd\\n        unit\\n        symbol\\n      }\\n      payment {\\n        relayId\\n        symbol\\n        usdPrice\\n        id\\n      }\\n      id\\n    }\\n  }\\n  ...SweepContextProvider_items\\n}\\n\\nfragment useIsItemSafelisted_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    collection {\\n      slug\\n      verificationStatus\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 30) {\\n      edges {\\n        node {\\n          asset {\\n            collection {\\n              slug\\n              verificationStatus\\n              id\\n            }\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment useIsQuickBuyEnabled_order on OrderV2Type {\\n  orderType\\n  item {\\n    __typename\\n    ... on AssetType {\\n      isCurrentlyFungible\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n}\\n\\nfragment useIsRarityEnabled_collection on CollectionType {\\n  slug\\n  enabledRarities\\n}\\n\\nfragment useItemCardCta_item_2qvZ6X on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  chain {\\n    identifier\\n    isTradingEnabled\\n  }\\n  orderData {\\n    bestAskV2 {\\n      orderType\\n      maker {\\n        address\\n        id\\n      }\\n      id\\n    }\\n  }\\n  ... on AssetType {\\n    isDelisted\\n    isListable\\n    isCurrentlyFungible\\n  }\\n}\\n\\nfragment useItemFees_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    totalCreatorFee\\n    collection {\\n      openseaSellerFeeBasisPoints\\n      isCreatorFeesEnforced\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      openseaSellerFeeBasisPoints\\n      totalCreatorFeeBasisPoints\\n      isCreatorFeesEnforced\\n      id\\n    }\\n  }\\n}\\n\\nfragment useTotalItems_orders on OrderV2Type {\\n  item {\\n    __typename\\n    relayId\\n    ... on AssetBundleType {\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              relayId\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n}\\n\\nfragment useTotalPrice_orders on OrderV2Type {\\n  relayId\\n  perUnitPriceType {\\n    usd\\n    unit\\n  }\\n  payment {\\n    symbol\\n    ...TokenPricePayment\\n    id\\n  }\\n}\\n\\nfragment wallet_accountKey on AccountType {\\n  address\\n}\\n\",\"variables\":{\"collections\":[\"${collectionUrlSuffix}\"],\"count\":32,\"cursor\":\"${cursor}\",\"filterOutListingsWithoutRequestedCreatorFees\":null,\"numericTraits\":null,\"owner\":null,\"paymentAssets\":null,\"priceFilter\":null,\"query\":null,\"rarityFilter\":null,\"resultModel\":\"ASSETS\",\"safelistRequestStatuses\":null,\"shouldShowBestBid\":false,\"sortAscending\":true,\"sortBy\":\"UNIT_PRICE\",\"stringTraits\":null,\"toggles\":null}}`,
    "method": "POST"
  });
}
function fetchOpenSeaCollectionGraphQLWithoutCursor(collectionUrlSuffix: string): Promise<Response>{
  return fetch("https://opensea.io/__api/graphql/", {
    "headers": {
      "accept": "*/*",
      "accept-language": "en-US,en;q=0.9,ko-KR;q=0.8,ko;q=0.7,id;q=0.6",
      "content-type": "application/json",
      "sec-ch-ua": "\"Chromium\";v=\"116\", \"Not)A;Brand\";v=\"24\", \"Google Chrome\";v=\"116\"",
      "sec-ch-ua-mobile": "?0",
      "sec-ch-ua-platform": "\"Windows\"",
      "sec-fetch-dest": "empty",
      "sec-fetch-mode": "cors",
      "sec-fetch-site": "same-origin",
      "x-app-id": "opensea-web",
      "x-build-id": "f0d88ce3a815988288a72441735649cc2ede85a3",
      "x-signed-query": "642c6474ecd06e22676ea678fa721c85bb1e9feb9dfc7e691a8300183f25b647",
      "cookie": "os-amplitude={%22deviceId%22:%22f7dfb5a3-1567-407b-8242-7b5750262b47%22}; _gcl_au=1.1.1944698478.1695882837; ext-os-wallet={%22installedWallets%22:[]%2C%22theme%22:%22light%22}; __os_session=eyJpZCI6IjM1ODU3YzVlLTMwNDctNGVhZC05ZGYwLWUyOGExMTdlMThmMiJ9; __os_session.sig=ITVoVLkx15nlT0Q60S1uh1dNksHY-wczESjp2dYrkUU; _gid=GA1.2.1047924192.1695882854; new_account_table_view_asset_card_variant=undefined; AMP_MKTG_ddd6ece4d5=JTdCJTIycmVmZXJyZXIlMjIlM0ElMjJodHRwcyUzQSUyRiUyRmFkdGVjaGV4cGxhaW5lZC5jb20lMkYlMjIlMkMlMjJyZWZlcnJpbmdfZG9tYWluJTIyJTNBJTIyYWR0ZWNoZXhwbGFpbmVkLmNvbSUyMiU3RA==; cf_clearance=6klyu2BCtjt_gXreSYy3Cc4H7OdiJIbL2gGaLk10L34-1695891688-0-1-c4cd0a1c.83db0d75.93cc55fc-0.2.1695891688; _ga=GA1.1.341421751.1695882854; _uetsid=0aa382d05dc911eea831297ad411c90e; _uetvid=0aa3bfe05dc911ee84b789a1891240c4; __cf_bm=JB3VH8CYfOCQCmTZNrh_fbkVgUP0290IwEweaI.fR90-1695892138-0-AUXjTBOuwv2LBOi48ajqLzAVn1IBrauC7+8nFwzMvTrq9d3JZs72EVw9GfUt5yc3BwnZ+1+aIkgCIy25jAUgOHM=; _cfuvid=dLM4YflCd.XECriwlsZ0EWPCNp44uzbEyPgXRxekSaY-1695892138543-0-604800000; _dd_s=rum=0&expire=1695893156619; _ga_9VSBF2K4BX=GS1.1.1695891140.3.1.1695892257.0.0.0; AMP_ddd6ece4d5=JTdCJTIyZGV2aWNlSWQlMjIlM0ElMjJmN2RmYjVhMy0xNTY3LTQwN2ItODI0Mi03YjU3NTAyNjJiNDclMjIlMkMlMjJzZXNzaW9uSWQlMjIlM0ExNjk1ODkxMTQ0NjYwJTJDJTIyb3B0T3V0JTIyJTNBZmFsc2UlMkMlMjJsYXN0RXZlbnRUaW1lJTIyJTNBMTY5NTg5MjI2MjcwMiUyQyUyMmxhc3RFdmVudElkJTIyJTNBODUlN0Q=",
      "Referer": "https://opensea.io/",
      "Referrer-Policy": "strict-origin"
    },
    "body": `{\"id\":\"CollectionAssetSearchListQuery\",\"query\":\"query CollectionAssetSearchListQuery(\\n  $collections: [CollectionSlug!]!\\n  $count: Int!\\n  $numericTraits: [TraitRangeType!]\\n  $paymentAssets: [PaymentAssetSymbol]\\n  $priceFilter: PriceFilterType\\n  $query: String\\n  $rarityFilter: RarityFilterType\\n  $resultModel: SearchResultModel\\n  $sortAscending: Boolean\\n  $sortBy: SearchSortBy\\n  $stringTraits: [TraitInputType!]\\n  $toggles: [SearchToggle!]\\n  $shouldShowBestBid: Boolean!\\n  $owner: IdentityInputType\\n  $filterOutListingsWithoutRequestedCreatorFees: Boolean\\n) {\\n  ...CollectionAssetSearchListPagination_data_1eC64m\\n}\\n\\nfragment AccountLink_data on AccountType {\\n  address\\n  config\\n  isCompromised\\n  user {\\n    publicUsername\\n    id\\n  }\\n  displayName\\n  ...ProfileImage_data\\n  ...wallet_accountKey\\n  ...accounts_url\\n}\\n\\nfragment AddToCartAndQuickBuyButton_order on OrderV2Type {\\n  ...useIsQuickBuyEnabled_order\\n  ...ItemAddToCartButton_order\\n  ...QuickBuyButton_order\\n}\\n\\nfragment AssetContextMenu_data on AssetType {\\n  relayId\\n}\\n\\nfragment AssetMediaAnimation_asset on AssetType {\\n  ...AssetMediaImage_asset\\n  ...AssetMediaContainer_asset\\n  ...AssetMediaPlaceholderImage_asset\\n}\\n\\nfragment AssetMediaAudio_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaImage_asset\\n}\\n\\nfragment AssetMediaContainer_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaEditions_asset_1mZMwQ\\n  collection {\\n    ...useIsRarityEnabled_collection\\n    id\\n  }\\n}\\n\\nfragment AssetMediaContainer_asset_1LNk0S on AssetType {\\n  backgroundColor\\n  ...AssetMediaEditions_asset_1mZMwQ\\n  collection {\\n    ...useIsRarityEnabled_collection\\n    id\\n  }\\n}\\n\\nfragment AssetMediaContainer_asset_4a3mm5 on AssetType {\\n  backgroundColor\\n  ...AssetMediaEditions_asset_1mZMwQ\\n  defaultRarityData {\\n    ...RarityIndicator_data\\n    id\\n  }\\n  collection {\\n    ...useIsRarityEnabled_collection\\n    id\\n  }\\n}\\n\\nfragment AssetMediaEditions_asset_1mZMwQ on AssetType {\\n  decimals\\n}\\n\\nfragment AssetMediaImage_asset on AssetType {\\n  backgroundColor\\n  imageUrl\\n  collection {\\n    displayData {\\n      cardDisplayStyle\\n    }\\n    id\\n  }\\n}\\n\\nfragment AssetMediaPlaceholderImage_asset on AssetType {\\n  collection {\\n    displayData {\\n      cardDisplayStyle\\n    }\\n    id\\n  }\\n}\\n\\nfragment AssetMediaVideo_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaImage_asset\\n}\\n\\nfragment AssetMediaWebgl_asset on AssetType {\\n  backgroundColor\\n  ...AssetMediaImage_asset\\n}\\n\\nfragment AssetMedia_asset on AssetType {\\n  animationUrl\\n  displayImageUrl\\n  imageUrl\\n  isDelisted\\n  ...AssetMediaAnimation_asset\\n  ...AssetMediaAudio_asset\\n  ...AssetMediaContainer_asset_1LNk0S\\n  ...AssetMediaImage_asset\\n  ...AssetMediaPlaceholderImage_asset\\n  ...AssetMediaVideo_asset\\n  ...AssetMediaWebgl_asset\\n}\\n\\nfragment AssetMedia_asset_1mZMwQ on AssetType {\\n  animationUrl\\n  displayImageUrl\\n  imageUrl\\n  isDelisted\\n  ...AssetMediaAnimation_asset\\n  ...AssetMediaAudio_asset\\n  ...AssetMediaContainer_asset_1LNk0S\\n  ...AssetMediaImage_asset\\n  ...AssetMediaPlaceholderImage_asset\\n  ...AssetMediaVideo_asset\\n  ...AssetMediaWebgl_asset\\n}\\n\\nfragment AssetMedia_asset_5MxNd on AssetType {\\n  animationUrl\\n  displayImageUrl\\n  imageUrl\\n  isDelisted\\n  ...AssetMediaAnimation_asset\\n  ...AssetMediaAudio_asset\\n  ...AssetMediaContainer_asset_4a3mm5\\n  ...AssetMediaImage_asset\\n  ...AssetMediaPlaceholderImage_asset\\n  ...AssetMediaVideo_asset\\n  ...AssetMediaWebgl_asset\\n}\\n\\nfragment AssetQuantity_data on AssetQuantityType {\\n  asset {\\n    ...Price_data\\n    id\\n  }\\n  quantity\\n}\\n\\nfragment AssetSearchListViewTableAssetInfo_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ...PortfolioTableItemCellTooltip_item\\n}\\n\\nfragment AssetSearchListViewTableQuickBuy_order on OrderV2Type {\\n  maker {\\n    address\\n    id\\n  }\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    ...itemEvents_dataV2\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  openedAt\\n  relayId\\n}\\n\\nfragment AssetSearchList_data_4hkUTB on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  ...ItemCard_data_1kHswz\\n  ... on AssetType {\\n    collection {\\n      isVerified\\n      relayId\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      isVerified\\n      relayId\\n      id\\n    }\\n  }\\n  chain {\\n    identifier\\n  }\\n  ...useAssetSelectionStorage_item_3j1bgC\\n}\\n\\nfragment BulkPurchaseModal_orders on OrderV2Type {\\n  relayId\\n  item {\\n    __typename\\n    relayId\\n    chain {\\n      identifier\\n    }\\n    ... on AssetType {\\n      collection {\\n        slug\\n        isSafelisted\\n        id\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  payment {\\n    relayId\\n    symbol\\n    id\\n  }\\n  ...useTotalPrice_orders\\n  ...useFulfillingListingsWillReactivateOrders_orders\\n}\\n\\nfragment CancelItemOrdersButton_items on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  chain {\\n    identifier\\n  }\\n  ... on AssetType {\\n    relayId\\n  }\\n  ... on AssetBundleType {\\n    relayId\\n  }\\n  ...CancelOrdersConfirmationModal_items\\n}\\n\\nfragment CancelOrdersConfirmationModal_items on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...StackedAssetMedia_assets\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            ...StackedAssetMedia_assets\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment CollectionAssetSearchListPagination_data_1eC64m on Query {\\n  queriedAt\\n  collectionItems(first: $count, collections: $collections, numericTraits: $numericTraits, paymentAssets: $paymentAssets, priceFilter: $priceFilter, querystring: $query, rarityFilter: $rarityFilter, resultType: $resultModel, sortAscending: $sortAscending, sortBy: $sortBy, stringTraits: $stringTraits, toggles: $toggles, owner: $owner, prioritizeBuyNow: true, filterOutListingsWithoutRequestedCreatorFees: $filterOutListingsWithoutRequestedCreatorFees) {\\n    edges {\\n      node {\\n        __typename\\n        ...readItemHasBestAsk_item\\n        ...AssetSearchList_data_4hkUTB\\n        ...useGetEligibleItemsForSweep_items\\n        ... on Node {\\n          __isNode: __typename\\n          id\\n        }\\n      }\\n      cursor\\n    }\\n    totalCount\\n    pageInfo {\\n      endCursor\\n      hasNextPage\\n    }\\n  }\\n}\\n\\nfragment CollectionLink_assetContract on AssetContractType {\\n  address\\n  blockExplorerLink\\n}\\n\\nfragment CollectionLink_collection on CollectionType {\\n  name\\n  slug\\n  verificationStatus\\n  ...collection_url\\n}\\n\\nfragment CollectionTrackingContext_collection on CollectionType {\\n  relayId\\n  slug\\n  isVerified\\n  isCollectionOffersEnabled\\n  defaultChain {\\n    identifier\\n  }\\n}\\n\\nfragment CreateListingButton_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...CreateQuickSingleListingFlowModal_asset\\n  }\\n  ...itemEvents_dataV2\\n  ...item_sellUrl\\n}\\n\\nfragment CreateQuickSingleListingFlowModal_asset on AssetType {\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  ...itemEvents_dataV2\\n}\\n\\nfragment EditListingButton_item on ItemType {\\n  __isItemType: __typename\\n  chain {\\n    identifier\\n  }\\n  ...EditListingModal_item\\n  ...itemEvents_dataV2\\n}\\n\\nfragment EditListingButton_listing on OrderV2Type {\\n  ...EditListingModal_listing\\n}\\n\\nfragment EditListingModal_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    tokenId\\n    assetContract {\\n      address\\n      id\\n    }\\n    chain {\\n      identifier\\n    }\\n  }\\n}\\n\\nfragment EditListingModal_listing on OrderV2Type {\\n  relayId\\n}\\n\\nfragment ItemAddToCartButton_order on OrderV2Type {\\n  maker {\\n    address\\n    id\\n  }\\n  taker {\\n    address\\n    id\\n  }\\n  item {\\n    __typename\\n    ... on AssetType {\\n      isCurrentlyFungible\\n    }\\n    ...itemEvents_dataV2\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  openedAt\\n  ...ShoppingCartContextProvider_inline_order\\n}\\n\\nfragment ItemCardContent on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  ... on AssetType {\\n    relayId\\n    name\\n    ...AssetMedia_asset_1mZMwQ\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            relayId\\n            ...AssetMedia_asset\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment ItemCardContent_1mZMwQ on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  ... on AssetType {\\n    relayId\\n    name\\n    ...AssetMedia_asset_1mZMwQ\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            relayId\\n            ...AssetMedia_asset\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment ItemCardCta_item_2qvZ6X on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  orderData {\\n    bestAskV2 {\\n      ...AddToCartAndQuickBuyButton_order\\n      ...EditListingButton_listing\\n      ...QuickBuyButton_order\\n      id\\n    }\\n  }\\n  ...useItemCardCta_item_2qvZ6X\\n  ...itemEvents_dataV2\\n  ...CreateListingButton_item\\n  ...EditListingButton_item\\n}\\n\\nfragment ItemCardFooter_EmmWh on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  name\\n  orderData {\\n    bestBidV2 {\\n      orderType\\n      priceType {\\n        unit\\n      }\\n      ...ItemCardPrice_data\\n      id\\n    }\\n    bestAskV2 {\\n      ...ItemCardFooter_bestAskV2\\n      id\\n    }\\n  }\\n  ...ItemMetadata_4xFTFU\\n  ... on AssetType {\\n    tokenId\\n    isDelisted\\n    defaultRarityData {\\n      ...RarityIndicator_data\\n      id\\n    }\\n    collection {\\n      slug\\n      name\\n      isVerified\\n      ...collection_url\\n      ...useIsRarityEnabled_collection\\n      id\\n    }\\n    largestOwner {\\n      owner {\\n        ...AccountLink_data\\n        id\\n      }\\n      id\\n    }\\n    ...AssetSearchListViewTableAssetInfo_item\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      slug\\n      name\\n      isVerified\\n      ...collection_url\\n      ...useIsRarityEnabled_collection\\n      id\\n    }\\n  }\\n  ...useItemCardCta_item_2qvZ6X\\n  ...item_url\\n  ...ItemCardContent\\n}\\n\\nfragment ItemCardFooter_bestAskV2 on OrderV2Type {\\n  orderType\\n  priceType {\\n    unit\\n  }\\n  maker {\\n    address\\n    id\\n  }\\n  ...ItemCardPrice_data\\n  ...ItemAddToCartButton_order\\n  ...AssetSearchListViewTableQuickBuy_order\\n  ...useIsQuickBuyEnabled_order\\n}\\n\\nfragment ItemCardPrice_data on OrderV2Type {\\n  perUnitPriceType {\\n    unit\\n  }\\n  payment {\\n    symbol\\n    id\\n  }\\n  ...useIsQuickBuyEnabled_order\\n}\\n\\nfragment ItemCard_data_1kHswz on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  orderData {\\n    bestAskV2 {\\n      priceType {\\n        eth\\n      }\\n      id\\n    }\\n  }\\n  ... on AssetType {\\n    isDelisted\\n    totalQuantity\\n    collection {\\n      slug\\n      ...CollectionTrackingContext_collection\\n      id\\n    }\\n    ...itemEvents_data\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      slug\\n      ...CollectionTrackingContext_collection\\n      id\\n    }\\n  }\\n  ...ItemCardContent_1mZMwQ\\n  ...ItemCardFooter_EmmWh\\n  ...ItemCardCta_item_2qvZ6X\\n  ...item_url\\n  ...ItemTrackingContext_item\\n}\\n\\nfragment ItemMetadata_4xFTFU on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  orderData {\\n    bestAskV2 {\\n      openedAt\\n      createdDate\\n      closedAt\\n      id\\n    }\\n  }\\n  assetEventData {\\n    lastSale {\\n      unitPriceQuantity {\\n        ...AssetQuantity_data\\n        quantity\\n        asset {\\n          symbol\\n          decimals\\n          id\\n        }\\n        id\\n      }\\n    }\\n  }\\n  ... on AssetType {\\n    bestAllTypeBid @include(if: $shouldShowBestBid) {\\n      perUnitPriceType {\\n        unit\\n        symbol\\n      }\\n      id\\n    }\\n    mintEvent @include(if: $shouldShowBestBid) {\\n      perUnitPrice {\\n        unit\\n        symbol\\n      }\\n      id\\n    }\\n  }\\n}\\n\\nfragment ItemTrackingContext_item on ItemType {\\n  __isItemType: __typename\\n  relayId\\n  verificationStatus\\n  chain {\\n    identifier\\n  }\\n  ... on AssetType {\\n    tokenId\\n    isReportedSuspicious\\n    assetContract {\\n      address\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    slug\\n  }\\n}\\n\\nfragment OrderListItem_order on OrderV2Type {\\n  relayId\\n  makerOwnedQuantity\\n  item {\\n    __typename\\n    displayName\\n    ... on AssetType {\\n      assetContract {\\n        ...CollectionLink_assetContract\\n        id\\n      }\\n      collection {\\n        ...CollectionLink_collection\\n        id\\n      }\\n      ...AssetMedia_asset\\n      ...asset_url\\n      ...useItemFees_item\\n    }\\n    ... on AssetBundleType {\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              displayName\\n              relayId\\n              assetContract {\\n                ...CollectionLink_assetContract\\n                id\\n              }\\n              collection {\\n                ...CollectionLink_collection\\n                id\\n              }\\n              ...StackedAssetMedia_assets\\n              ...AssetMedia_asset\\n              ...asset_url\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ...itemEvents_dataV2\\n    ...useIsItemSafelisted_item\\n    ...ItemTrackingContext_item\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  remainingQuantityType\\n  ...OrderPrice\\n}\\n\\nfragment OrderList_orders on OrderV2Type {\\n  item {\\n    __typename\\n    ... on AssetType {\\n      __typename\\n      relayId\\n    }\\n    ... on AssetBundleType {\\n      __typename\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              relayId\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  relayId\\n  ...OrderListItem_order\\n  ...useFulfillingListingsWillReactivateOrders_orders\\n}\\n\\nfragment OrderPrice on OrderV2Type {\\n  priceType {\\n    unit\\n  }\\n  perUnitPriceType {\\n    unit\\n  }\\n  payment {\\n    ...TokenPricePayment\\n    id\\n  }\\n}\\n\\nfragment PortfolioTableItemCellTooltip_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ...AssetMedia_asset_5MxNd\\n  ...PortfolioTableTraitTable_asset\\n  ...asset_url\\n}\\n\\nfragment PortfolioTableTraitTable_asset on AssetType {\\n  assetContract {\\n    address\\n    chain\\n    id\\n  }\\n  isCurrentlyFungible\\n  tokenId\\n}\\n\\nfragment Price_data on AssetType {\\n  decimals\\n  symbol\\n  usdSpotPrice\\n}\\n\\nfragment ProfileImage_data on AccountType {\\n  imageUrl\\n}\\n\\nfragment QuickBuyButton_order on OrderV2Type {\\n  maker {\\n    address\\n    id\\n  }\\n  taker {\\n    address\\n    ...wallet_accountKey\\n    id\\n  }\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    ...itemEvents_dataV2\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  openedAt\\n  relayId\\n}\\n\\nfragment RarityIndicator_data on RarityDataType {\\n  rank\\n  rankPercentile\\n  rankCount\\n  maxRank\\n}\\n\\nfragment ShoppingCartContextProvider_inline_order on OrderV2Type {\\n  relayId\\n  makerOwnedQuantity\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    relayId\\n    ... on AssetBundleType {\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              relayId\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  maker {\\n    relayId\\n    id\\n  }\\n  taker {\\n    address\\n    ...wallet_accountKey\\n    id\\n  }\\n  priceType {\\n    usd\\n  }\\n  payment {\\n    relayId\\n    id\\n  }\\n  remainingQuantityType\\n  ...useTotalItems_orders\\n  ...ShoppingCart_orders\\n}\\n\\nfragment ShoppingCartDetailedView_orders on OrderV2Type {\\n  relayId\\n  item {\\n    __typename\\n    chain {\\n      identifier\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n  supportsGiftingOnPurchase\\n  ...useTotalPrice_orders\\n  ...OrderList_orders\\n}\\n\\nfragment ShoppingCart_orders on OrderV2Type {\\n  ...ShoppingCartDetailedView_orders\\n  ...BulkPurchaseModal_orders\\n}\\n\\nfragment StackedAssetMedia_assets on AssetType {\\n  relayId\\n  ...AssetMedia_asset\\n  collection {\\n    logo\\n    id\\n  }\\n}\\n\\nfragment SweepContextProvider_items on ItemType {\\n  __isItemType: __typename\\n  relayId\\n  orderData {\\n    bestAskV2 {\\n      relayId\\n      payment {\\n        symbol\\n        id\\n      }\\n      perUnitPriceType {\\n        unit\\n      }\\n      ...BulkPurchaseModal_orders\\n      ...useTotalPrice_orders\\n      id\\n    }\\n  }\\n}\\n\\nfragment TokenPricePayment on PaymentAssetType {\\n  symbol\\n}\\n\\nfragment accounts_url on AccountType {\\n  address\\n  user {\\n    publicUsername\\n    id\\n  }\\n}\\n\\nfragment asset_url on AssetType {\\n  assetContract {\\n    address\\n    id\\n  }\\n  tokenId\\n  chain {\\n    identifier\\n  }\\n}\\n\\nfragment bundle_url on AssetBundleType {\\n  slug\\n  chain {\\n    identifier\\n  }\\n}\\n\\nfragment collection_url on CollectionType {\\n  slug\\n  isCategory\\n}\\n\\nfragment itemEvents_data on AssetType {\\n  relayId\\n  assetContract {\\n    address\\n    id\\n  }\\n  tokenId\\n  chain {\\n    identifier\\n  }\\n}\\n\\nfragment itemEvents_dataV2 on ItemType {\\n  __isItemType: __typename\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  ... on AssetType {\\n    tokenId\\n    assetContract {\\n      address\\n      id\\n    }\\n  }\\n}\\n\\nfragment item_sellUrl on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...asset_url\\n  }\\n  ... on AssetBundleType {\\n    slug\\n    chain {\\n      identifier\\n    }\\n    assetQuantities(first: 18) {\\n      edges {\\n        node {\\n          asset {\\n            relayId\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment item_url on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    ...asset_url\\n  }\\n  ... on AssetBundleType {\\n    ...bundle_url\\n  }\\n}\\n\\nfragment readItemHasBestAsk_item on ItemType {\\n  __isItemType: __typename\\n  orderData {\\n    bestAskV2 {\\n      __typename\\n      id\\n    }\\n  }\\n}\\n\\nfragment useAssetSelectionStorage_item_3j1bgC on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  chain {\\n    identifier\\n    isTradingEnabled\\n  }\\n  ... on AssetType {\\n    bestAllTypeBid @include(if: $shouldShowBestBid) {\\n      relayId\\n      id\\n    }\\n    ...asset_url\\n    isCompromised\\n  }\\n  ... on AssetBundleType {\\n    orderData {\\n      bestBidV2 @include(if: $shouldShowBestBid) {\\n        relayId\\n        id\\n      }\\n    }\\n  }\\n  ...item_sellUrl\\n  ...AssetContextMenu_data\\n  ...CancelItemOrdersButton_items\\n}\\n\\nfragment useFulfillingListingsWillReactivateOrders_orders on OrderV2Type {\\n  ...useTotalItems_orders\\n}\\n\\nfragment useGetEligibleItemsForSweep_items on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  relayId\\n  chain {\\n    identifier\\n  }\\n  orderData {\\n    bestAskV2 {\\n      relayId\\n      orderType\\n      maker {\\n        address\\n        id\\n      }\\n      perUnitPriceType {\\n        usd\\n        unit\\n        symbol\\n      }\\n      payment {\\n        relayId\\n        symbol\\n        usdPrice\\n        id\\n      }\\n      id\\n    }\\n  }\\n  ...SweepContextProvider_items\\n}\\n\\nfragment useIsItemSafelisted_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    collection {\\n      slug\\n      verificationStatus\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    assetQuantities(first: 30) {\\n      edges {\\n        node {\\n          asset {\\n            collection {\\n              slug\\n              verificationStatus\\n              id\\n            }\\n            id\\n          }\\n          id\\n        }\\n      }\\n    }\\n  }\\n}\\n\\nfragment useIsQuickBuyEnabled_order on OrderV2Type {\\n  orderType\\n  item {\\n    __typename\\n    ... on AssetType {\\n      isCurrentlyFungible\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n}\\n\\nfragment useIsRarityEnabled_collection on CollectionType {\\n  slug\\n  enabledRarities\\n}\\n\\nfragment useItemCardCta_item_2qvZ6X on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  chain {\\n    identifier\\n    isTradingEnabled\\n  }\\n  orderData {\\n    bestAskV2 {\\n      orderType\\n      maker {\\n        address\\n        id\\n      }\\n      id\\n    }\\n  }\\n  ... on AssetType {\\n    isDelisted\\n    isListable\\n    isCurrentlyFungible\\n  }\\n}\\n\\nfragment useItemFees_item on ItemType {\\n  __isItemType: __typename\\n  __typename\\n  ... on AssetType {\\n    totalCreatorFee\\n    collection {\\n      openseaSellerFeeBasisPoints\\n      isCreatorFeesEnforced\\n      id\\n    }\\n  }\\n  ... on AssetBundleType {\\n    bundleCollection: collection {\\n      openseaSellerFeeBasisPoints\\n      totalCreatorFeeBasisPoints\\n      isCreatorFeesEnforced\\n      id\\n    }\\n  }\\n}\\n\\nfragment useTotalItems_orders on OrderV2Type {\\n  item {\\n    __typename\\n    relayId\\n    ... on AssetBundleType {\\n      assetQuantities(first: 30) {\\n        edges {\\n          node {\\n            asset {\\n              relayId\\n              id\\n            }\\n            id\\n          }\\n        }\\n      }\\n    }\\n    ... on Node {\\n      __isNode: __typename\\n      id\\n    }\\n  }\\n}\\n\\nfragment useTotalPrice_orders on OrderV2Type {\\n  relayId\\n  perUnitPriceType {\\n    usd\\n    unit\\n  }\\n  payment {\\n    symbol\\n    ...TokenPricePayment\\n    id\\n  }\\n}\\n\\nfragment wallet_accountKey on AccountType {\\n  address\\n}\\n\",\"variables\":{\"collections\":[\"${collectionUrlSuffix}\"],\"count\":32,\"numericTraits\":null,\"paymentAssets\":null,\"priceFilter\":null,\"query\":null,\"rarityFilter\":null,\"resultModel\":\"ASSETS\",\"sortAscending\":true,\"sortBy\":\"UNIT_PRICE\",\"stringTraits\":null,\"toggles\":null,\"shouldShowBestBid\":false,\"owner\":null,\"filterOutListingsWithoutRequestedCreatorFees\":null}}`,
    "method": "POST"
  });
}